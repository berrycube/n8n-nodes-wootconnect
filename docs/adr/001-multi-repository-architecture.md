# ADR-001: 多仓库架构设计

## 状态
✅ 已接受 (2025-09-01)

## 背景
n8n-suite项目需要管理多个相关但独立的n8n插件，同时支持公开插件的MIT许可和私有集成的商业许可。需要设计一个既能保持代码清晰分离，又能支持统一开发流程的架构。

## 决策
采用多仓库架构，使用pnpm workspaces管理，git submodules集成：

```
n8n-suite/
├── public/                        # 公开插件 (MIT许可)
│   ├── n8n-nodes-oauth2-enhanced/
│   ├── n8n-nodes-evoguard/
│   └── n8n-nodes-wootconnect/
└── private/
    ├── n8n-suite-integration/     # 集成测试
    └── n8n-pro-extensions/        # 商业插件
```

## 原理
1. **许可清晰性**: 公开/私有代码物理分离，避免许可混淆
2. **独立发布**: 每个插件可独立版本控制和发布
3. **GitHub模板**: 公开插件作为模板，便于社区贡献
4. **统一工作流**: pnpm workspace保持开发体验一致性

## 后果

### 积极影响
- ✅ 许可证清晰分离，无法律风险
- ✅ 独立版本控制，支持不同发布节奏
- ✅ GitHub模板功能，便于社区扩展
- ✅ CI/CD独立，减少构建干扰

### 消极影响
- ⚠️ 跨插件依赖需要额外管理
- ⚠️ 代码重复可能增加维护成本

### 缓解措施
- 建立共享工具库处理公共逻辑
- 标准化CI/CD模板减少重复配置